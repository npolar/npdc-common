<!DOCTYPE html>
<div ng-keyup="keyup($event);">
    <md-autocomplete ng-if="options.floatingLabel"
      md-floating-label="{{options.placeholder | t}}"
      md-item-text="title(item)"
      md-items="item in querySearch(options.q)"
      md-min-length="1"
      md-no-cache="false"
      md-search-text="options.q"
      md-selected-item-change="selectedItemChange(item)"
      md-selected-item="selectedItem"
      md-menu-class="{{options.menuClass}}">

      <md-item-template>
        [{{item.collection}}] <span md-highlight-flags="^i" md-highlight-text="options.q">{{ title(item) }}</span>
      </md-item-template>

    </md-autocomplete>

    <md-autocomplete ng-if="!options.floatingLabel"
      placeholder="{{options.placeholder | t}}"
      md-item-text="title(item)"
      md-items="item in querySearch(options.q)"
      md-min-length="1"
      md-no-cache="true"
      md-search-text="options.q"
      md-selected-item-change="selectedItemChange(item)"
      md-selected-item="selectedItem"
      md-menu-class="{{options.menuClass}}">

      <md-item-template>
        [{{item.collection}}] <span md-highlight-flags="^i" md-highlight-text="options.q">{{ title(item) }}</span>
      </md-item-template>

    </md-autocomplete>

    <div ng-if="options.showCollections && !expandSearch">
      <br/>
      <md-checkbox ng-model="options.collections[collection]" ng-repeat="(collection, value) in options.collections">{{ collection }}</md-checkbox>
    </div>
</div>
